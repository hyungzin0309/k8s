
## Node drain

> drain 상태는 노드를 유지 관리하거나 업데이트하기 위해 해당 노드에서 실행 중인 모든 파드(Pod)를 안전하게 제거하고 다른 노드로 이동시키는 과정을 의미한다. 이 작업은 주로 클러스터의 안정성을 보장하고, 노드를 업그레이드하거나 유지 보수할 때 필요하다.

### 노드 Drain 과정
1. **노드 유지 보수 준비**
<br>유지 보수를 위해 노드를 선택하고, 해당 노드에 대한 새로운 파드 스케줄링을 방지한다. 이를 위해 kubectl drain <노드 이름> 명령어를 사용하며, 이 명령은 선택된 노드를 "SchedulingDisabled" 상태로 변경한다.


2. **파드 이동**
<br>선택된 노드에서 실행 중인 파드들은 안전하게 종료되고, 클러스터 내 다른 노드로 재스케줄링된다. 이 과정에서 ReplicaSet, Deployment, StatefulSet 등의 컨트롤러가 관리하는 파드들은 자동으로 다른 노드에 재생성된다.


3. **노드 유지 보수**
<br>파드가 안전하게 다른 노드로 이동한 후, 유지 보수할 노드는 시스템 업그레이드, 패치 적용 등의 작업을 수행할 수 있다.


4. **노드 복귀**
<br>유지 보수가 완료되면, 노드를 클러스터에 다시 포함시켜 작업을 재개할 수 있다. 이를 위해 kubectl uncordon <노드 이름> 명령어를 사용하여 노드의 스케줄링을 다시 활성화한다.


### Cordon

> uncordon 의 반대 cordon 노드에 파드가 더 이상 스케줄링 되지 않도록 한다. 단, drain 과 달리 기존의 pod 를 종료시키지 않는다.
